<!-- File: cam-viewer.component.html -->
<app-connection-status></app-connection-status>
<mat-sidenav-container class="viewer-container">
  <mat-sidenav #sidenav
               mode="side"
               position="start"
               [(opened)]="sidePanelOpen"
               class="control-sidenav">

    <!-- Sidebar Header -->
    <div class="sidebar-header">
      <img src="../assets/realsense-logo.png" alt="Intel RealSense" class="sidebar-logo">
    </div>

    <!-- Sidebar Content -->
    <div class="sidebar-content">
      <app-sidebar-controls
        (depthToggleChange)="onDepthToggle($event)"
        (rgbToggleChange)="onRgbToggle($event)"
        (depthResolutionChange)="updateDepthConfig($event)"
        (rgbResolutionChange)="updateRGBConfig($event)"
        (depthExposureChange)="updateDepthExposure($event)"
        (rgbExposureChange)="updateRGBExposure($event)"
        (depthMetadataToggle)="onDepthMetadataToggle($event)"
        (rgbMetadataToggle)="onRgbMetadataToggle($event)">
      </app-sidebar-controls>
    </div>
  </mat-sidenav>

  <!-- Main content area -->
  <mat-sidenav-content>
    <div class="persistent-header">
      <button mat-icon-button class="sidebar-toggle" (click)="sidenav.toggle()">
        <mat-icon>{{ sidePanelOpen ? 'chevron_left' : 'menu' }}</mat-icon>
      </button>
      <span class="header-title">Intel RealSense Viewer</span>
    </div>

    <div class="content-area">
      <app-cam-streams
        [showDepth]="showDepth"
        [showRGB]="showRGB"
        [depthImageUrl]="depthImageUrl"
        [colorImageUrl]="colorImageUrl"
        [depthMetadataLines]="depthMetadataLines"
        [rgbMetadataLines]="rgbMetadataLines">
      </app-cam-streams>

      <!-- Overlay while reconfiguring -->
      <div class="overlay" *ngIf="isReconfiguring">
        <div class="overlay-content">
          <mat-icon class="spinner">autorenew</mat-icon>
          <p>Reconfiguring. Please wait...</p>
        </div>
      </div>
    </div>
  </mat-sidenav-content>
</mat-sidenav-container>
